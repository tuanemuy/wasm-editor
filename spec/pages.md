# ページ構成

## 概要

本アプリケーションは3つの主要ページで構成されるSPAです。
UXを重視し、ページ遷移を最小限に抑え、モーダル/ダイアログやインラインコンポーネントを活用します。

## UX設計の方針

### 新規メモ作成
- ホーム画面のFAB（Floating Action Button）から直接作成
- 空のメモをDBに保存し、即座に `/memos/:id` に遷移
- ユーザーはすぐに編集を開始できる

### タグ管理
- 別ページではなく、ホーム画面のサイドバーで管理
- ページ遷移なしでフィルタリングが可能
- タグクリックで即座に絞り込み

### 検索機能
- ホーム画面のヘッダーに常設
- 検索結果はメモ一覧として表示（ページ遷移なし）
- リアルタイム検索でUXを向上

## ページ一覧

---

## 1. ホーム（メモ一覧）

### 基本情報
- **ページ名**: ホーム（メモ一覧）
- **パス**: `/`
- **概要**: メモをタイムライン形式で一覧表示し、閲覧・検索・フィルタリングを行う中心ページ

### ユースケース一覧

#### メモ管理
- `getNotes`: メモ一覧を取得（ページネーション付き）
- `createNote`: 新規メモを作成（空のメモをDBに保存）

#### タグ管理
- `getTags`: タグ一覧を取得

#### 検索
- `searchNotes`: メモを全文検索
- `searchNotesByTags`: タグで検索
- `combinedSearch`: 全文検索とタグ検索を組み合わせ

#### エクスポート（一括）
- `exportNotesAsMarkdown`: 選択したメモを一括でMarkdownエクスポート

### コンポーネント一覧

#### レイアウト
- `HomeLayout`: ホーム画面全体のレイアウト
  - ヘッダー
  - サイドバー
  - メインコンテンツエリア

#### ヘッダー
- `HomeHeader`: ヘッダーコンポーネント
  - `AppLogo`: アプリケーションロゴ
  - `SearchBar`: 検索バー（全文検索）
  - `SortSelect`: ソート順選択ドロップダウン
  - `SettingsLink`: 設定ページへのリンク

#### サイドバー
- `TagSidebar`: タグ管理サイドバー
  - `TagList`: タグ一覧表示
  - `TagItem`: 個別タグ表示（名前、使用回数）
  - `TagFilter`: 選択中のタグフィルター表示
  - `ClearFilterButton`: フィルタークリアボタン

#### メインコンテンツ
- `MemoList`: メモ一覧表示
  - `MemoCard`: 個別メモカード
    - Markdownプレビュー（一部、グラデーションで隠す）
    - 作成日時または更新日時
    - タグ表示
  - `InfiniteScroll`: 無限スクロール機能
  - `LoadingIndicator`: 読み込み中表示
  - `EmptyState`: メモがない場合の表示

#### アクション
- `CreateMemoFAB`: 新規メモ作成FAB（Floating Action Button）
- `BulkSelectMode`: 一括選択モード
  - `SelectCheckbox`: 選択用チェックボックス
  - `BulkActionBar`: 一括操作バー（エクスポート等）

#### ダイアログ・モーダル
- `ExportOptionsDialog`: エクスポート形式選択ダイアログ

### 共通レイアウト
- アプリケーション全体のヘッダー
- トーストノーティフィケーション（エラー、成功メッセージ）

---

## 2. メモ詳細・編集

### 基本情報
- **ページ名**: メモ詳細・編集
- **パス**: `/memos/:id`
- **概要**: メモの閲覧と編集を行うページ。Tiptapエディターでリッチテキスト編集が可能

### ユースケース一覧

#### メモ管理
- `getNote`: メモを取得（ID指定）
- `updateNote`: メモを更新（自動保存）
- `deleteNote`: メモを削除

#### エクスポート
- `exportNoteAsMarkdown`: メモをMarkdownとしてエクスポート

### コンポーネント一覧

#### レイアウト
- `EditorLayout`: エディターページ全体のレイアウト
  - ヘッダー
  - エディターコンテンツエリア

#### ヘッダー
- `EditorHeader`: エディターヘッダーコンポーネント
  - `BackButton`: ホームに戻るボタン
  - `MemoTitle`: メモタイトル表示（本文から自動抽出）
  - `SaveStatusIndicator`: 保存状態表示（保存中、保存済み）
  - `ExportButton`: エクスポートボタン
  - `DeleteButton`: 削除ボタン

#### エディター
- `TiptapEditor`: Tiptapエディターコンポーネント
  - `EditorToolbar`: エディターツールバー
    - フォーマットボタン（見出し、太字、斜体等）
    - リンク挿入ボタン
  - `EditorContent`: エディターコンテンツ表示エリア
  - `ViewModeToggle`: 閲覧/編集モード切り替え

#### ダイアログ・モーダル
- `DeleteConfirmDialog`: 削除確認ダイアログ
- `ExportOptionsDialog`: エクスポート形式選択ダイアログ

### 共通レイアウト
- トーストノーティフィケーション（保存状態、エラーメッセージ）

---

## 3. 設定

### 基本情報
- **ページ名**: 設定
- **パス**: `/settings`
- **概要**: アプリケーション設定とDB管理を行うページ

### ユースケース一覧

#### アプリケーション設定
- `getSettings`: アプリケーション設定を取得
- `updateSettings`: アプリケーション設定を更新
  - デフォルトソート順
  - 自動保存間隔

### コンポーネント一覧

#### レイアウト
- `SettingsLayout`: 設定ページ全体のレイアウト
  - ヘッダー
  - メインコンテンツエリア

#### ヘッダー
- `SettingsHeader`: 設定ヘッダーコンポーネント
  - `BackButton`: ホームに戻るボタン
  - `SettingsTitle`: 設定タイトル

#### メインコンテンツ
- `SortOrderSelect`: デフォルトソート順選択
- `AutoSaveIntervalInput`: 自動保存間隔入力

### 共通レイアウト
- アプリケーション全体のヘッダー
- トーストノーティフィケーション

---

## 共通レイアウト

全ページで共有されるレイアウト要素：

### グローバルヘッダー（オプション）
ページによってヘッダーの内容は異なるが、以下の要素は共通的に使用される：
- アプリケーションロゴ/タイトル
- ナビゲーション

### トーストノーティフィケーション
全ページで表示可能な通知システム：
- 成功メッセージ（保存完了、エクスポート完了等）
- エラーメッセージ（保存失敗等）
- 情報メッセージ（保存中、読み込み中等）

### グローバルコンテキスト
全ページで共有されるコンテキスト：
- アプリケーション設定
- 保存状態

---

## ルーティング構造

```
/                          # ホーム（メモ一覧）
/memos/:id                 # メモ詳細・編集
/settings                  # 設定
```
